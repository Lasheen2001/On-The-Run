<!DOCTYPE html>
<html>

<head>
  <script>

    window.addEventListener('DOMContentLoaded', (event) => {
      // Retrieve the containers from the query parameter
      const urlParams = new URLSearchParams(window.location.search);
      const loans = urlParams.get('loans');
    });
  </script>
  <style>
    .heading_container {
      margin-top: 20px;
      margin-bottom: 20px;
    }
  </style>
  <style>
    .container {
      margin-top: 20px;
      margin-bottom: 20px;
      display: none;
    }
  </style>
  <style>
    .heading_container {
      margin-top: 20px;
      margin-bottom: 20px;
    }
  </style>

  <style>
    .center {
      text-align: center;
    }
  </style>
  <style>
    h2 {
      margin-bottom: 20px;
    }

    body {
      height: 100%;
    }

    .wrapper {
      min-height: 100%;
      position: relative;
    }

    .content {
      padding-bottom: 60px;
      /* Adjust this value based on your footer's height */
    }

      .footer {
        background-color: black;
        color: #636363;
        text-align: center;
        position: absolute;
        bottom: 0px;
        left: 0;
        width: 100%;
        padding: 20px 0;
      }
  </style>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>Bank X</title>

  <!-- slider stylesheet -->
  <!-- slider stylesheet -->
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet" />
  <!-- Custom styles for this template -->
  <link href="css/style.css" rel="stylesheet" />
  <!-- responsive style -->
  <link href="css/responsive.css" rel="stylesheet" />
</head>

<body>
  <!-- header section strats -->
  <div class="wrapper">
  <header class="header_section">
    <div class="container-fluid">
      <nav class="navbar navbar-expand-lg custom_nav-container ">
        <a class="navbar-brand" href="index.html">
          <span>
            Bank X
          </span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <div class="d-flex ml-auto flex-column flex-lg-row align-items-center">
            <ul class="navbar-nav  ">
              <li class="nav-item active">
                <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="notifications.html"> Notifications </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="issues.html"> Report an issue </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#"> Logout</a>
              </li>
            </ul>
          </div>
      </nav>
    </div>
  </header>
    <section class="how_section layout_padding">
      <div class="heading_container">
        <h2>Loan Payment</h2>
      </div>
      <div>
        <div style="text-align: center;">
          <label >Balance:</label>
          <span id="balance"></span>
        </div>
        <div style="text-align: center;">
          <label>Total Loan Amount:</label>
          <span id="totalLoanAmount"></span>
        </div>
        <div style="text-align: center;">
          <label >Total Amount Paid:</label>
          <span id="totalAmountPaid"></span>
        </div>
        <div  style="text-align: center;">
          <label>Installment Amount:</label>
          <span id="installmentAmount"></span>
        </div>
        <div  style="text-align: center;">
          <label>Fully Paid:</label>
          <span id="date"></span>
        </div>
        <section class="how_section layout_padding">
          <div class="btn-box">
            <a onclick="makePayment()" style="color:white" ;>Pay</a>
          </div>
          <p id="result"></p>
        </section>
      </div>
      
    </section>
    <!-- end how section -->
    
  </div>
  <div
  class="d-flex justify-content-start align-items-center mt-3"
  id="btn"
  style="padding-bottom: 20px"
>
  <button
    class="btn btn-primary btn-lg btn-custom mr-2"
    onclick="window.location.href='loan_home.html'"
    style="
      background-color: black;
      color: white;
      border: 0px;
      margin-top: 0 px;
      margin-left: 30px;
    "
  >
    Back
  </button>
</div>

    <div class="how_section layout_padding"></div>
  <!-- footer section -->
  <footer class="footer">
    <p>
      &copy; 2023 All Rights Reserved By On The Run
    </p>
  </footer>
</div>

  <!-- footer section -->
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const loans = urlParams.get('loans');
    var loanAmount1 = 10000;
    var loanPaid1 = 2000;
    var loanInstallmentAmount1 = 1000;
    var date1 = "2023-08-08";

    var loanAmount2 = 50000;
    var loanPaid2 = 15000;
    var loanInstallmentAmount2 = 5000;
    var balance = 100000;
    var date2 = "2023-12-12";
      
    // Function to retrieve the total amount from the URL query parameter
    function getLoanAmount() {
      if (loans) {
          if (loans === "1") {
            return loanAmount1;
          }
          return loanAmount2;
      }
    }
    function getLoanPaid() {
      if (loans) {
          if (loans === "1") {
            return loanPaid1;
          }
          return loanPaid2;
      }
    }
    function getLoanInstallmentAmount() {
      if (loans) {
          if (loans === "1") {
            return loanInstallmentAmount1;
          }
          return loanInstallmentAmount2;
      }
    }
    function getDate() {
      if (loans) {
          if (loans === "1") {
            return date1;
          }
          return date2;
      }
    }

    // Function to retrieve the balance from the URL query parameter
    function getBalance() {
      return balance;
    }

    function changeAll(value) {
      changeBalance(value);
      changeLoanPaid(value);
      changeLoanInstallmentAmount();
    }

    // Function to change the total amount from the URL query parameter
    function changeLoanPaid(value) {
      if (loans) {
          if (loans === "1") {
            loanPaid1 += value;
          }else{
            loanPaid2 += value;
          }
      }
    }
    function changeLoanInstallmentAmount() {
      if(loans){
        if(loans === "1"){
          loanInstallmentAmount1 = 0
        }else {
          loanInstallmentAmount2 = 0
        }
      }
    }

    // Function to change the balance from the URL query parameter
    function changeBalance(value) {
      balance -= value;
    }

    function setAll() {
      setLoanAmount();
      setLoanPaid();
      setLoanInstallmentAmount();
      setDate();
      setBalance();
    }

    // Function to set the total amount on the page
    function setLoanAmount() {
      const totalAmountElement = document.getElementById("totalLoanAmount");
      const totalAmount = getLoanAmount();
      totalAmountElement.textContent = "$" + totalAmount.toFixed(2);
    }
    function setLoanPaid() {
      const totalAmountElement = document.getElementById("totalAmountPaid");
      const totalAmount = getLoanPaid();
      totalAmountElement.textContent = "$" + totalAmount.toFixed(2);
    }
    function setLoanInstallmentAmount() {
      const totalAmountElement = document.getElementById("installmentAmount");
      const totalAmount = getLoanInstallmentAmount();
      totalAmountElement.textContent = "$" + totalAmount.toFixed(2);
    }
    function setDate() {
      const totalAmountElement = document.getElementById("date");
      totalAmountElement.textContent = getDate();
    }

    // Function to set the balance on the page
    function setBalance() {
      const totalAmountElement = document.getElementById("balance");
      const totalAmount = getBalance();
      totalAmountElement.textContent = "$" + totalAmount.toFixed(2);
    }

    // Function to make the payment
    function makePayment() {
      const result = document.getElementById("result");
      result.style.textAlign = "center";
      if(loans){
        if(loans === "1"){
          if(loanInstallmentAmount1 != 0 && loanInstallmentAmount1 <= balance){
            changeAll(loanInstallmentAmount1);
            setAll();
            result.textContent ="Payment Completed!";
            result.style.color = "green";
            return;
          }
        }else if(loanInstallmentAmount2 != 0 && loanInstallmentAmount2 <= balance){
            changeAll(loanInstallmentAmount2);
            setAll();
            result.textContent ="Payment Completed!";
            result.style.color = "green";
            return;
          }
      }
      result.textContent ="Payment Failed!";
      result.style.color = "red";

    }

    // Set the initial total amount and toggle the payment amount field visibility
    setAll();
  </script>

</body>
</html>